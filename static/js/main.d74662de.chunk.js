(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/oms-960x340.e7283396.jpg"},25:function(e,t,a){e.exports=a(55)},30:function(e,t,a){},31:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),i=a.n(o),s=(a(30),a(2)),l=a(3),c=a(5),d=a(4),m=a(6),u=a(58),p=a(60),g=a(59),h=(a(31),a(13)),f=a.n(h),v=a(57),b=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={burgerActive:!1},a.toggleBurger=function(e){var t=e.target.dataset.target;document.getElementById(t);a.setState({burgerActive:!a.state.burgerActive})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar is-dark",role:"navigation",style:{backgroundColor:"#242f3e"}},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("a",{className:"navbar-item is-size-1 has-text-white",href:"/"},"The Bars of Davis Square"),r.a.createElement("div",{className:this.state.burgerActive?"navbar-burger is-active":"navbar-burger","data-target":"navbarMenu",id:"burgerButton",onClick:this.toggleBurger,role:"button",style:{outline:"none"},tabIndex:"0",title:"Hamburger menu button"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null))),r.a.createElement("div",{id:"navbarMenu",className:this.state.burgerActive?"navbar-menu is-active":"navbar-menu"},r.a.createElement("div",{className:"navbar-start"}),r.a.createElement("div",{className:"navbar-end"},r.a.createElement(v.a,{className:"navbar-item has-text-white",to:"/"},"Home"),r.a.createElement(v.a,{className:"navbar-item has-text-white",to:"/about"},"About"),r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",onChange:this.props.handleSearch,title:"Enter the name of a bar to filter Davis Square Area bars. Only bars containing the search term will appear in the list of venues and in the map.",type:"text",placeholder:"find a bar"})))))))}}]),t}(n.Component);function y(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"content has-text-centered"},r.a.createElement("p",null,r.a.createElement("strong",null,"The Bars of Davis Square")," by ",r.a.createElement("a",{style:{textDecoration:"underline"},href:"https://github.com/julianjohannesen",title:"My GitHub page"},"Julian Johannesen"),".")))}var w=a(22),E=a.n(w),M=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{id:"list",className:"section",style:{padding:"0"}},r.a.createElement("h2",{className:"heading is-size-4"},"Local Bars"),r.a.createElement("ul",{className:"menu-list",id:"listUl",onClick:this.props.listClick},this.props.barMarkers.map(function(e){return e.visible?r.a.createElement("li",{className:"menu-item",key:E()()},r.a.createElement("h3",{id:e.barData.venue.id},e.barData.venue.name)):null})))}}]),t}(n.Component),k=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.barMarkers,a=e.showListings,n=e.hideListings,o=e.toggleDrawing,i=e.zoomToArea,s=e.searchWithinTime;return r.a.createElement("main",{id:"main"},r.a.createElement("section",{id:"tools"},r.a.createElement("div",{className:"form-container"},r.a.createElement("div",{className:"field has-addons",style:{marginRight:"1em"}},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button",id:"show-listings",title:"Show all venues in Davis Square in list view and on map",onClick:a},"Show")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button",id:"hide-listings",title:"Hide all venues from list view and map",onClick:n},"Hide"))),r.a.createElement("div",{className:"field",style:{marginRight:"1em"}},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button",id:"toggle-drawing",title:"Show drawing tools on map.",onClick:o},"Drawing Tools"))),r.a.createElement("div",{className:"field has-addons",style:{marginRight:"1em"}},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",id:"zoom-to-area-text",title:"Enter a street address and click zoom to zoom to area",type:"text",placeholder:"Enter street address"})),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button",id:"zoom-to-area",title:"After entering an address, click here to zoom to area",onClick:i},"Zoom"))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("p",{className:"text text-margin"},"Within a "))),r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"select control"},r.a.createElement("select",{className:"",id:"max-duration",title:"Select a length of time you are willing to travel in minutes.",style:{borderTopRightRadius:"0",borderBottomRightRadius:"0"}},r.a.createElement("option",{value:"10"},"10 min"),r.a.createElement("option",{value:"15"},"15 min"),r.a.createElement("option",{value:"30"},"30 min"),r.a.createElement("option",{value:"60"},"1 hour"))),r.a.createElement("div",{className:"select control"},r.a.createElement("select",{className:"",defaultValue:"WALKING",id:"mode",title:"Select a mode of travel.",style:{borderTopLeftRadius:"0",borderBottomLeftRadius:"0"}},r.a.createElement("option",{value:"DRIVING"},"drive"),r.a.createElement("option",{value:"WALKING"},"walk"),r.a.createElement("option",{value:"BICYCLING"},"bike"),r.a.createElement("option",{value:"TRANSIT"},"transit")))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("p",{className:"text text-margin"}," of "))),r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",id:"search-within-time-text",title:"After selecting a length of time and mode of travel, enter a starting address to find venues that can reached in the time indicated, by the mode of travel indicated, and then click on the 'Go' button.",type:"text",placeholder:"Enter street address"})),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button",id:"search-within-time",title:"After entering a starting address, click here to filter Davis Square bars by distance by mode of travel.",onClick:s},"Go"))))),r.a.createElement(M,{barMarkers:t,listClick:this.props.listClick}),r.a.createElement("section",{className:"",id:"map"}))}}]),t}(n.Component),T=a(23),N=a.n(T),O=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{class:"hero"},r.a.createElement("figure",{class:"image"},r.a.createElement("img",{src:N.a,alt:"Olde Magoun's Saloon on a packed night."})))}}]),t}(n.Component),S=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,null),r.a.createElement("main",{className:"section",style:{gridTemplateColumns:"1fr"}},r.a.createElement("h2",{className:"heading is-size-3"},"What is this?"),r.a.createElement("p",{className:"text"},"The Bars of Davis Square is a loving tribute to the bars, pubs, breweries, and etc. in and around Davis Square, Somerville."),r.a.createElement("p",{className:"text"},"Users can enter the name of a bar in the search box at the top right of the page to find a specific bar or they can use the map tools to (1) find bars in an area of their choosing, (2) zoom in on a particular area, or (3) find all of the bars within walking distance of a particular address."),r.a.createElement("h2",{className:"heading is-size-3"},"Implementation details"),r.a.createElement("p",{className:"text"},"The Bars of Davis Square was created using React and Bulma CSS. The information that appears on the map and the map itself are made possible by FourSquare's API and  Google's Google Maps JavaScript API. The application first fetches a list of Davis Square area bars from FourSquare's API, and, after setting state to capture the response data, calls a function that fetches and loads our map. Map markers are generated and assigned to each venue returned by FourSquare and a single Info Window instance is populated with the relevant information whenever a user clicks on a marker. The drawing tools, zoom functionality, and search-within-time-by-mode functionality are accomplished with the Google Maps API."),r.a.createElement("h2",{className:"heading is-size-3"},"Thanks"),r.a.createElement("p",{className:"text"},"I'd like to thank Yahya Elharony for his series of tutorials on using the FourSquare and Google Maps APIs together.")))}}]),t}(n.Component),x=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{margin:"2em"}},r.a.createElement("h3",null,"The URL you entered (",r.a.createElement("code",null,this.props.location.pathname),") was not found."),r.a.createElement(v.a,{to:"/"},"Home"))}}]),t}(n.Component),A=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={bars:[],barMarkers:[],bounds:{},davisMap:{},polygon:[]},a.lat=42.396365,a.lng=-71.122262,a.initMap=function(){var e={center:{lat:a.lat,lng:a.lng},mapTypeControlOptions:{mapTypeIds:["styled_davisMap","roadmap"]},zoom:16};a.setState({davisMap:new window.google.maps.Map(document.getElementById("map"),e),bounds:new window.google.maps.LatLngBounds,barInfo:new window.google.maps.InfoWindow,drawingMngr:new window.google.maps.drawing.DrawingManager({drawingMode:window.google.maps.drawing.OverlayType.POLYGON,drawingControl:!0,drawingControlOptions:{position:window.google.maps.ControlPosition.TOP_LEFT,drawingModes:[window.google.maps.drawing.OverlayType.POLYGON]}})});var t=new window.google.maps.StyledMapType([{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}],{name:"Night Mode"});a.state.davisMap.mapTypes.set("styled_davisMap",t),a.state.davisMap.setMapTypeId("styled_davisMap"),a.setState({barMarkers:a.state.bars.map(function(e,t){var n={url:"https://maps.google.com/mapfiles/ms/micons/bar.png",size:new window.google.maps.Size(32,32),origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(16,32)};return new window.google.maps.Marker({animation:window.google.maps.Animation.DROP,barData:e,icon:n,id:t,map:a.state.davisMap,position:{lat:e.venue.location.lat,lng:e.venue.location.lng},shape:{coords:[1,1,1,32,16,32,16,1],type:"poly"},title:e.venue.name,visible:!0,zIndex:10+t})})}),a.state.barMarkers.forEach(function(e,t){e.addListener("click",function(){return a.populateBarInfo(a.state.barInfo,e,a.state.davisMap)})})},a.populateBarInfo=function(e,t,n){e!==t&&a.setState({barInfo:(e.marker=t,e.setContent("<h3>".concat(t.title,"</h3><p>").concat(t.barData.venue.location.address,"</p>")),e.open(n,t),e.addListener("closeclick",function(){return e.marker=null}),e),barMakers:a.state.barMarkers.map(function(e){return e.barData.id===t.barData.id?(e.animation=void(null!==t.getAnimation()?t.setAnimation(null):t.setAnimation(window.google.maps.Animation.BOUNCE)),t):t})})},a.handleSearch=function(e){a.setState({barMarkers:a.state.barMarkers.map(function(t){return t.barData.venue.name.toLowerCase().includes(e.target.value.toLowerCase())?(t.visible=!0,!0):t.visible=!1,t})})},a.showListings=function(){a.setState({barMarkers:a.state.barMarkers.map(function(e){return e.setMap(a.state.davisMap),a.state.bounds.extend(e.position),e.visible=!0,e})}),a.state.davisMap.fitBounds(a.state.bounds)},a.hideListings=function(){return a.setState({barMarkers:a.state.barMarkers.map(function(e){return e.setMap(null),e.visible=!1,e})})},a.handlePolygon=function(e){var t=function(e){a.setState({barMarkers:function(){for(var t=0;t<e.length;t++){window.google.maps.geometry.poly.containsLocation(e[t].position,a.state.polygon)?(e[t].setMap(a.state.davisMap),e[t].visible=!0):(e[t].setMap(null),e[t].visible=!1)}return e}()})};a.state.polygon.length>0&&(a.setState({polygon:(a.state.polygon.setMap(null),a.state.polygon)}),a.hideListings()),a.state.drawingMngr.setDrawingMode(null),a.setState({polygon:(e.overlay.setEditable(!0),e.overlay)}),t(a.state.barMarkers),a.state.polygon.getPath().addListener("set_at",t),a.state.polygon.getPath().addListener("insert_at",t)},a.toggleDrawing=function(){console.log("Here's the drawing manager object: ",a.state.drawingMngr),a.state.drawingMngr.map?(a.state.drawingMngr.setMap(null),a.state.polygon&&a.state.polygon.setMap(null)):(a.state.drawingMngr.setMap(a.state.davisMap),a.state.drawingMngr.addListener("overlaycomplete",a.handlePolygon))},a.zoomToArea=function(){var e=new window.google.maps.Geocoder,t=document.getElementById("zoom-to-area-text").value;if(""===t)window.alert("You must enter an area or address.");else{var n={address:t,componentRestrictions:{locality:"Somerville"}};e.geocode(n,function(e,t){t===window.google.maps.GeocoderStatus.OK?(a.davisMap.setCenter(e[0].geometry.location),a.davisMap.setZoom(18)):window.alert("We could not find the location. Please try entering a more specific location.")})}},a.displayMarkersWithinTime=function(e){for(var t=document.getElementById("max-duration").value,n=e.originAddresses,r=e.destinationAddresses,o=0;o<n.length;o++)for(var i=e.rows[o].elements,s=0;s<r.length;s++){var l=i[s];if("OK"===l.status){var c=l.distance.text,d=l.duration.value/60,m=l.duration.text;d<=t&&function(){a.barMarkers[o].setMap(a.davisMap),!0;var e=new window.google.maps.InfoWindow({content:m+" away "+c});e.open(a.davisMap,a.barMarkers[o]),a.barMarkers[o].infoWindow=e,window.google.maps.event.addListener(a.barMarkers[o],"click",function(){return e.close()})}()}}},a.searchWithinTime=function(){var e=new window.google.maps.DistanceMatrixService,t=document.getElementById("search-within-time-text").value;if(""===t)window.alert("Please enter an address.");else{a.hideListings();for(var n=[],r=0;r<25;r++)n[r]=a.barMarkers[r].position;var o=t,i=document.getElementById("mode").value;e.getDistanceMatrix({origins:n,destinations:[o],travelMode:window.google.maps.TravelMode[i],unitSystem:window.google.maps.UnitSystem.IMPERIAL},function(e,t){t!==window.google.maps.DistanceMatrixStatus.OK?window.alert("Error has status"+t):a.displayMarkersWithinTime(e)})}},a.listClick=function(e){a.state.barMarkers.forEach(function(t){t.barData.venue.id===e.target.id&&a.populateBarInfo(a.state.barInfo,t,a.state.davisMap)})},a.loadScript=function(e){var t=window.document.getElementsByTagName("script")[0],a=window.document.createElement("script");a.src=e,a.async=!0,a.defer=!0,t.parentNode.insertBefore(a,t)},a.loadMap=function(){console.log("loadMap fired");window.initMap=a.initMap,a.loadScript("https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyAKidTbGki0g1eG1laz79qvkDVLMYVxLOU","&libraries=").concat(["drawing","geometry","geocoder"].join(","),"&v=").concat("3","&callback=initMap"))},a.loadData=function(){var e={client_id:"W5EAA4B3DHWV1ZLG3OATVOZYTYZNI5WWG0LRLPHBHVHC3JV3",client_secret:"3ZTMTTP43WP4OXWOAKITGOYLIVPVW1NDQHPZ0I342VH4R5X0",v:20190117,ll:"".concat(a.lat,",").concat(a.lng),section:"drinks"};f.a.get("https://api.foursquare.com/v2/venues/explore?"+new URLSearchParams(e)).then(function(e){return a.setState({bars:e.data.response.groups[0].items},a.loadMap)}).catch(function(e){return console.log(e)})},a.loadDetails=function(e){var t="https://api.foursquare.com/v2/venues/"+(e.target.venue.id+"?")+new URLSearchParams({client_id:"W5EAA4B3DHWV1ZLG3OATVOZYTYZNI5WWG0LRLPHBHVHC3JV3",client_secret:"3ZTMTTP43WP4OXWOAKITGOYLIVPVW1NDQHPZ0I342VH4R5X0",v:20190117});f.a.get(t).then(function(e){console.log("The URL was: ",t,"The successful response is: ",e),a.setState({barDetails:e.data.response.venue})}).catch(function(e){return console.log(e)}),a.loadMap()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this;return r.a.createElement(u.a,{basename:"bars-of-davis"},r.a.createElement("div",{className:"App"},r.a.createElement(b,{handleSearch:this.handleSearch}),r.a.createElement(p.a,null,r.a.createElement(g.a,{exact:!0,path:"/",render:function(){return r.a.createElement(k,{barMarkers:e.state.barMarkers,showListings:e.showListings,hideListings:e.hideListings,toggleDrawing:e.toggleDrawing,zoomToArea:e.zoomToArea,searchWithinTime:e.searchWithinTime,listClick:e.listClick})}}),r.a.createElement(g.a,{exact:!0,path:"/About",component:S}),r.a.createElement(g.a,{render:function(t){return r.a.createElement(x,Object.assign({},t,{theLocation:e.props.location}))}})),r.a.createElement(y,null)))}}]),t}(n.Component),L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function I(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(r.a.createElement(A,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/bars-of-davis",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/bars-of-davis","/service-worker.js");L?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):I(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):I(t,e)})}}()}},[[25,1,2]]]);
//# sourceMappingURL=main.d74662de.chunk.js.map